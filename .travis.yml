language: java

notifications:
  email: false
  slack: fallanditurninn:XO6AI0eBjaYis0hTIzbunM44

addons:
  chrome: stable

before_install:
 - chmod +x gradlew

install:
 - ./gradlew assemble


before_script:
 - echo $TRAVIS_COMMIT
 - echo $TRAVIS_TAG
 - echo $TRAVIS_BRANCH
 - echo $TRAVIS_BUILD_NUMBER
 - echo $TRAVIS_REPO_SLUG
 - wget -N http://chromedriver.storage.googleapis.com/2.30/chromedriver_linux64.zip -P ~/
 - unzip ~/chromedriver_linux64.zip -d ~/
 - rm ~/chromedriver_linux64.zip
 - sudo mv -f ~/chromedriver /usr/local/share/
 - sudo chmod +x /usr/local/share/chromedriver
 - sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
 - whereis google-chrome-stable
 - whereis chromedriver

script:
 - ./gradlew check
 - "export DISPLAY=:99.0"
 - "sh -e /etc/init.d/xvfb start"
 - sleep 5
 - ./gradlew selenium



deploy:
  - provider: heroku
    api_key: 1983693b-f02d-4342-99e6-adcea68ceb7f
    app: ancient-gorge-29926
    on:
      repo: FallandiTurninn/TicTacToe
      all_branches: true

  - provider: heroku
    api_key: 1983693b-f02d-4342-99e6-adcea68ceb7f
    app: evening-hollows-74327
    on:
      repo: FallandiTurninn/TicTacToe
      branch: heroku_staging

  - provider: heroku
    api_key: acb27651-119b-486d-991a-7989c9b0cd23
    app: tranquil-castle-98562
    on:
      repo: FallandiTurninn/TicTacToe
      branch: master
